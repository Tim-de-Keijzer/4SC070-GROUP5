function V_result = Opti_waveforms(x)%% Global variablesglobal width amplitude%% Model namesys_name = '';% sys_name = 'EV_2spd_4AUB10_2';load_system(sys_name);%% Set actual optimization valueswidth         = x(1);  % clamp dimple widthamplitude     = x(2);  % clamp dimple height%% Set constrainsreq      = [0, 0.1, 0, 0.25];min_width = req(1);                                                        max_width = req(2);                                                    min_amp= req(3);                                                    max_amp = req(4);                                       %% Build matrix of optimization parameter valuesx_result = [x_result; x'];% y_result = [y_result; [mv]'];% z_result = [z_result; [ta]'];%% Simulationoptions = simset('SrcWorkspace','current');results = sim(sys_name,[],options);% Consider last value of the computed output vector V_result = results.cons_BT(end);%% Checks% % Check whether cycle could be finished exactly in N_sim computational steps;% % if cycle duration is less than N_sim, set output to infinite% if (max(size(results.t)) < N_sim)%      V_result = Inf;% endif width >= min_width    V_result = V_result;else    V_result = Inf;endif width <= max_width    V_result = V_result;else    V_result = Inf;endif width >= min_amp    V_result = V_result;else    V_result = Inf;endif width <= max_amp    V_result = V_result;else    V_result = Inf;end